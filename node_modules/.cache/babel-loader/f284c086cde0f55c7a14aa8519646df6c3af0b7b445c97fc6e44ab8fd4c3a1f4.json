{"ast":null,"code":"export default {\n  data() {\n    return {\n      form: {\n        name: '',\n        JavaList: [],\n        JarList: []\n      },\n      rules: {\n        name: [{\n          required: true,\n          message: '请输入Java应用程序名称',\n          trigger: 'blur'\n        }, {\n          min: 3,\n          max: 20,\n          message: '长度在3到20个字符',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    beforeZipUpload(file) {\n      let suffix = file.name.split('.')[1].toLowerCase();\n      const type = suffix === 'zip' || suffix === 'rar';\n      const size = file.size / 1024 / 1024 < 500; // 1G\n\n      if (!type) {\n        this.$message.error('上传文件只能是 zip 或 rar 格式!');\n      } else if (!size) {\n        this.$message.error('上传文件大小必须小于1G');\n      }\n      return type && size;\n    },\n    handleExceedZip(files, fileList) {\n      this.$message.warning(`只能上传一个压缩包, 本次上传了${files.length}个文件, 总共${files.length + fileList.length}`);\n    },\n    beforeJarUpload(file) {\n      let suffix = file.name.split('.')[1].toLowerCase();\n      const type = suffix === 'jar';\n      const size = file.size / 1024 / 1024 / 1024 < 2; // 2G\n\n      if (!type) {\n        this.$message.error('上传文件只能是 zip 或 rar 格式!');\n      } else if (!size) {\n        this.$message.error('上传文件大小必须小于1G');\n      }\n      return type && size;\n    },\n    handleExceedJar(files, fileList) {\n      this.$message.warning(`只能上传一个Jar包, 本次上传了${files.length}个文件, 总共${files.length + fileList.length}`);\n    },\n    handleSuccess() {\n      this.$message.info('上传成功');\n      console.log(this.form.JavaList);\n      console.log(this.form.JarList);\n    }\n  }\n};","map":{"version":3,"names":["data","form","name","JavaList","JarList","rules","required","message","trigger","min","max","methods","beforeZipUpload","file","suffix","split","toLowerCase","type","size","$message","error","handleExceedZip","files","fileList","warning","length","beforeJarUpload","handleExceedJar","handleSuccess","info","console","log"],"sources":["src/components/Upload.vue"],"sourcesContent":["<template>\n    <div>\n        <br>\n        <el-form ref=\"form\" :model=\"form\" label-width=\"150px\" label-position=\"right\">\n            <el-form-item label=\"输入Java程序名称\" prop=\"name\">\n                <el-input v-model=\"form.name\"></el-input>\n            </el-form-item>\n            <el-form-item label=\"上传Java程序压缩包\" prop=\"zip\">\n                <el-upload\n                    class=\"upload-zip\"\n                    action=\"#\"\n                    :limit=\"1\"\n                    :show-file-list=\"true\"\n                    :file-list=\"this.form.JavaList\"\n                    :before-upload=\"beforeZipUpload\"\n                    :on-exceed=\"handleExceedZip\"\n                    :on-success=\"handleSuccess\"\n                    >\n                    <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n                    <div slot=\"tip\" class=\"el-upload__tip\">上传zip/rar文件, 且不超过500MB</div>\n                </el-upload>\n            </el-form-item>\n            <el-form-item label=\"上传Jar包\" prop=\"jar\">\n                <el-upload\n                    class=\"upload-jar\"\n                    action=\"#\"\n                    :limit=\"1\"\n                    :show-file-list=\"true\"\n                    :file-list=\"this.form.JarList\"\n                    :before-upload=\"beforeJarUpload\"\n                    :on-exceed=\"handleExceedJar\"\n                    :on-success=\"handleSuccess\"\n                    >\n                    <el-button size=\"small\" type=\"primary\">点击上传</el-button>\n                    <div slot=\"tip\" class=\"el-upload__tip\">上传jar文件, 且不超过500MB</div>\n                </el-upload>\n            </el-form-item>\n        </el-form>\n    </div>\n</template>\n\n<script>\nexport default {\n    data() {\n      return {\n        form: {\n            name: '',\n            JavaList: [],\n            JarList: [],\n        },\n        rules: {\n            name: [\n                { required: true, message: '请输入Java应用程序名称', trigger: 'blur' },\n                { min: 3, max: 20, message: '长度在3到20个字符', trigger: 'blur' }\n            ],\n        }\n      }\n    },\n    methods: {\n        beforeZipUpload(file) {\n            let suffix = file.name.split('.')[1].toLowerCase()\n            const type = suffix === 'zip' || suffix === 'rar'\n            const size = file.size / 1024 / 1024 < 500 // 1G\n            \n            if(!type) {\n                this.$message.error('上传文件只能是 zip 或 rar 格式!');\n            } else if(!size) {\n                this.$message.error('上传文件大小必须小于1G');\n            }\n            return type && size\n        },\n        handleExceedZip(files, fileList) {\n            this.$message.warning(`只能上传一个压缩包, 本次上传了${files.length}个文件, 总共${files.length + fileList.length}`)\n        },\n        beforeJarUpload(file) {\n            let suffix = file.name.split('.')[1].toLowerCase()\n            const type = suffix === 'jar'\n            const size = file.size / 1024 / 1024 / 1024 < 2 // 2G\n            \n            if(!type) {\n                this.$message.error('上传文件只能是 zip 或 rar 格式!');\n            } else if(!size) {\n                this.$message.error('上传文件大小必须小于1G');\n            }\n            return type && size\n        },\n        handleExceedJar(files, fileList) {\n            this.$message.warning(`只能上传一个Jar包, 本次上传了${files.length}个文件, 总共${files.length + fileList.length}`)\n        },\n        handleSuccess() {\n            this.$message.info('上传成功')\n            console.log(this.form.JavaList)\n            console.log(this.form.JarList)\n        },\n    }\n}\n</script>\n\n<style lang=\"less\" scoped>\n\n</style>"],"mappings":"AA0CA;EACAA,KAAA;IACA;MACAC,IAAA;QACAC,IAAA;QACAC,QAAA;QACAC,OAAA;MACA;MACAC,KAAA;QACAH,IAAA,GACA;UAAAI,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,GAAA;UAAAC,GAAA;UAAAH,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAG,OAAA;IACAC,gBAAAC,IAAA;MACA,IAAAC,MAAA,GAAAD,IAAA,CAAAX,IAAA,CAAAa,KAAA,SAAAC,WAAA;MACA,MAAAC,IAAA,GAAAH,MAAA,cAAAA,MAAA;MACA,MAAAI,IAAA,GAAAL,IAAA,CAAAK,IAAA;;MAEA,KAAAD,IAAA;QACA,KAAAE,QAAA,CAAAC,KAAA;MACA,YAAAF,IAAA;QACA,KAAAC,QAAA,CAAAC,KAAA;MACA;MACA,OAAAH,IAAA,IAAAC,IAAA;IACA;IACAG,gBAAAC,KAAA,EAAAC,QAAA;MACA,KAAAJ,QAAA,CAAAK,OAAA,oBAAAF,KAAA,CAAAG,MAAA,UAAAH,KAAA,CAAAG,MAAA,GAAAF,QAAA,CAAAE,MAAA;IACA;IACAC,gBAAAb,IAAA;MACA,IAAAC,MAAA,GAAAD,IAAA,CAAAX,IAAA,CAAAa,KAAA,SAAAC,WAAA;MACA,MAAAC,IAAA,GAAAH,MAAA;MACA,MAAAI,IAAA,GAAAL,IAAA,CAAAK,IAAA;;MAEA,KAAAD,IAAA;QACA,KAAAE,QAAA,CAAAC,KAAA;MACA,YAAAF,IAAA;QACA,KAAAC,QAAA,CAAAC,KAAA;MACA;MACA,OAAAH,IAAA,IAAAC,IAAA;IACA;IACAS,gBAAAL,KAAA,EAAAC,QAAA;MACA,KAAAJ,QAAA,CAAAK,OAAA,qBAAAF,KAAA,CAAAG,MAAA,UAAAH,KAAA,CAAAG,MAAA,GAAAF,QAAA,CAAAE,MAAA;IACA;IACAG,cAAA;MACA,KAAAT,QAAA,CAAAU,IAAA;MACAC,OAAA,CAAAC,GAAA,MAAA9B,IAAA,CAAAE,QAAA;MACA2B,OAAA,CAAAC,GAAA,MAAA9B,IAAA,CAAAG,OAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}